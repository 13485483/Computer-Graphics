<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
	<style>
		body {margin: 0;}
		canvas {width: 100%; height: 100%;}
		</style>

    <script src="lib/three.js"></script>
    <script src="lib/TrackballControls.js"></script>
    <script src="js/Data.js"></script>
    <script src="js/Planet.js"></script>
    <script src="js/KeyCameraListenr.js"></script>
    <script src="js/Application.js"></script>
	<script src="js/dat.gui.min.js"></script>
</head>
<body>
	<style>
		body{
			width:100%;
			height:100%;
			overflow:hidden;
			position:absolute;
			background:#000000;
		}
	  
	  #info {
			  position: absolute;
			  top: 10px;
			  width: 100%;
			  text-align: center;
	  }
		  </style>
<div>
    <div style="float: left; width: 30%">
        <!-- <table border="8" style="background-color: aquamarine">
            <tr><td>按键</td><td>功能</td></tr>
            <tr><td>E</td><td>切换到地球视角</td></tr>
            <tr><td>L</td><td>切回默认视角</td></tr>
            <tr><td>W S A D</td><td>移动视角窗口</td></tr>
            <tr><td>鼠标左右中键</td><td>改变视角窗口</td></tr>
        </table> -->
    </div>
    <div style="display: inline-block; margin-top: 35px; margin-bottom: 35px" align="center">
        
    </div>
</div>
<br/>

<div class ="container"></div>
</div>
<script id="fragmentShader" type="x-shader/x-fragment">

			uniform float time;

			uniform sampler2D texture1;
			uniform sampler2D texture2;

			varying vec2 texCoord;

			void main( void ) {

				vec4 noise = texture2D( texture1, texCoord );

				vec2 T1 = texCoord + vec2( 1.5, -1.5 ) * time  * 0.01;
				vec2 T2 = texCoord + vec2( -0.5, 2.0 ) * time *  0.01;

				T1.x -= noise.r * 2.0;
				T1.y += noise.g * 4.0;
				T2.x += noise.g * 0.2;
				T2.y += noise.b * 0.2;

				float p = texture2D( texture1, T1 * 2.0 ).a + 0.25;

				vec4 color = texture2D( texture2, T2 );
				vec4 temp = color * 2.0 * ( vec4( p, p, p, p ) ) + ( color * color );
				gl_FragColor = temp;
				//vec4 color = texture2D(texture2, texCoord);
				//vec4 temp = color * FOO;
				gl_FragColor = temp;
			}

		</script>
<script id="vertexShader" type="x-shader/x-vertex">
			varying vec2 texCoord;

			void main()
			{
				texCoord = uv;
				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 ) * FOO;
				gl_Position = projectionMatrix * mvPosition;
			}

		</script>
<script>
    function main() {
        var baseContainer = document.body;
        var app = new Application(baseContainer);
		var starCount =  1;
		var gui;
        var atSun = new Boolean(false);
        var atEarth = new Boolean(false);
        var atMercury = new Boolean(false);
        var atVenus = new Boolean(false);
        var atMoon = new Boolean(false);
        var atMars = new Boolean(false);
        var atJupiter = new Boolean(false);
        var atSaturn = new Boolean(false);
        var atUranus = new Boolean(false);
        var atNeptune = new Boolean(false);
       
		function buildGui()
        {
          gui = new dat.GUI();
          var orbitFolder = gui.addFolder('speed');
          var lightFolder = gui.addFolder('light');
          var starFolder = gui.addFolder('star');
          var camFolder  = gui.addFolder('camera');
          var params = {
            addStars: starCount,
            sun: atSun = Boolean(false),
            earth: atEarth = Boolean(false),
           mercury: atMercury = Boolean(false),
            venus: atVenus = Boolean(false), 
            moon: atMoon = Boolean(false),
            mars: atMars = Boolean(false),
            jupiter: atJupiter = Boolean(false), 
           saturn: atSaturn = Boolean(false),
            uranus: atUranus = Boolean(false),
            neptune: atNeptune = Boolean(false),
			p_light_intensity: app.pointLight.intensity,
			a_light_color: app.ambientLight1.color.getHex(),
			speed: timeStep
          }
        
          orbitFolder.add(params, 'speed', 0.0, 1.5).onChange(function (val)
          {
            timeStep = val;
          });
          lightFolder.add(params, 'p_light_intensity', 0, 10).onChange(function (val)
		  {
			  app.pointLight.intensity = val;
		  }
		  );
		  lightFolder.addColor( params, 'a_light_color' ).onChange( function ( val ) 
		  {
			app.ambientLight1.color.setHex( val );
          });
          
		   starFolder.add(params, 'addStars', 1, 8000).onChange(function (val)
          {
            starCount= val;
           app.addStars(starCount, 1000);
          });
         /* starFolder.add(params, 'removeStars', 1, 10000).onChange(function(val)
          {
              starCount.starNumber = val;
              removeStars(starCount.starNumber, 1000);
          }
          );*/
          camFolder.add(params, 'sun', 0, 1).onChange(function (val)
          {
              atSun = val;
              if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{ 
				app.camera.position.set(0,0,0);
              }
            
          }
          );
          
          camFolder.add(params, 'earth', 0, 1).onChange(function (val)
          {
              atEarth = val; 
              if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{
				app.camera.position.set(200,0,0);
              }
            
          }
          );
          camFolder.add(params, 'mercury', 0, 1).onChange(function (val)
          {
              atMercury = val; 
              if(val==0)
              {
                app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{
				app.camera.position.set(120,0,0);
              }
              
          }
          );
          camFolder.add(params, 'venus', 0, 1).onChange(function (val)
          {
              atVenus = val; 
              if(val==0)
              {
                app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{
				app.camera.position.set(170,0,0);
              }
              
          }
          );
          camFolder.add(params, 'moon', 0, 1).onChange(function (val)
          {
              atMoon = val;
              if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else
              {
				app.camera.position.set(205,0,0);
              }
              
          }
          );
          camFolder.add(params, 'mars', 0, 1).onChange(function (val)
          {
              atMars = val; 
              if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else
              {
				app.camera.position.set(242,0,0);
              }
          }
          );
          camFolder.add(params, 'jupiter', 0, 1).onChange(function (val)
          {
              atJupiter = val; 
              if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{
				app.camera.position.set(450,0,0);
              }
              
          }
          );
          camFolder.add(params, 'saturn', 0, 1).onChange(function (val)
          {
              atSaturn = val; 
			  if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{
				app.camera.position.set(620,0,0);
              }
              
          }
          );
          camFolder.add(params, 'uranus', 0, 1).onChange(function (val)
          {
              atUranus = val; 
			  if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{
				app.camera.position.set(870,0,0);
              }
              
          }
          );
          camFolder.add(params, 'neptune', 0, 1).onChange(function (val)
          {
              atNeptune = val; 
			  if(val==0)
              {
				app.camera.position.set(-350,400,100);
				app.camera.up.set(0,0,1);   
				app.camera.lookAt(app.scene.position);
              }
              else{
				app.camera.position.set(1080,0,0);
              } 
          }
          );
          gui.open();
		}
		buildGui();
		app.render();
    };
	
	
    main();
	
</script>
</body>
</html>